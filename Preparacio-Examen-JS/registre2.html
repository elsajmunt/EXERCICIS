<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <form id="elForm" method="GET" action="http://www.google.com" name="miForm" > <!-- action= <<< PENDENT Enviar a la pàgina Inici Sesió -->
            <input type="text" id="nom" name="nom" placeholder="Nom"> <span id="avis_nom"></span><br> <!-- NOM -->
            <input type="text" id="cognoms" name="cognoms" placeholder="Cognoms"><span id="avis_cognoms"></span><br> <!-- COGNOMS -->                
            <input type="number" id="edat" name="edat" placeholder="Edat"><span id="avis_edat"></span><br> <!-- EDAT -->
            <input type="text" id="telefon" name="telefon" placeholder="Telèfon 999-999-999"><span id="avis_telefon"></span><br><!-- TELÈFON -->
        <!--<input type="text" id="telefon" name="telefon" placeholder="Telèfon 999-999-999" pattern="\d{3}-\d{3}-\d{3}" required><span id="avis_telefon"></span><br> -- TELEFON PROVA FORMAT -->

            <label></label><strong>Género:</strong></label><br> <!-- GENERO (input type Radio)  -->
            <label for="hombre" class="inline">Hombre</label> <!-- Hombre  -->
            <input type="radio" id="hombre" name="sexo" class="inline">   
            <label for="mujer" class="inline">Mujer</label> <!-- Mujer  -->
            <input type="radio" id="mujer" name="sexo" class="inline">
            <span id="avis_genero"></span><br>

            <select name="provincia" id="provincia"> <!-- PROVINCIA (Select)  -->
                <option>Escull Provincia</option>
                <option>Barcelona</option>
                <option>Girona</option>
                <option>Lleida</option>
                <option>Tarragona</option>               
            </select>
            <span id="avis_provincia"></span><br>

            <input type="checkbox" name="políticas" id="politicas">Aceptas las políticas de privacidad<br> <!-- POLÍTICAS (input type checkbox)  -->
            <span id="avis_politicas"></span><br>

            <input type="submit" name="envio" ><br> <!-- BOTÓ ENVIAR  -->
        </form>

        <script> // JS
            let elFormulari = document.getElementById("elForm");
            elFormulari.addEventListener ("submit", function (event) { //FUNCIÓ sense nom. Noms elements PREDETERMINATS. Salta al clicar Submit
                event.preventDefault();
        
            // VARIABLES: -------------------------------------------------------------------

                let resultat = true;  // true ACCEPTA QUE D'ENTRADA TOT ESTÀ BÉ o ÉS VALID

                let Nom = document.getElementById("nom"); // NOM ---------------------
                let avisNom = document.getElementById("avis_nom"); 
                let valorNom = Nom.value;  // Agafa el VALOR del NOM (que ha entrat l'usuari)
                let longNom = valorNom.length; // Agafa la LONGITUD del NOM

                let Cognoms = document.getElementById("cognoms"); // COGNOMS -------------------
                let avisCognoms = document.getElementById("avis_cognoms");
                let valorCognoms = Cognoms.value;  // Agafa el VALOR del COGNOMS (que ha entrat l'usuari)
                let longCognoms = valorCognoms.length; // Agafa la LONGITUT del COGNOMS

                let Edat = document.getElementById("edat"); //  EDAT ---------------------
                let avisEdat = document.getElementById("avis_edat"); 
                let valorEdat = Edat.value;  // per agafar el VALOR EDAT
                let maximaEdat = 65; // EDAT màxima 

                let telefon = document.getElementById("telefon"); //  TELÈFON ----------------- 
                let avisTelefon = document.getElementById("avis_telefon");
                let valorTelefon = telefon.value; 
                let formatTelefon = (/(\d{3})(\d{3})(\d{3})/, '$1-$2-$3');  // Aplica FORMAT 999-999-999

                let elementGeneroH = document.getElementById("hombre");     // GENERO  ---------------------
                let elementGeneroM = document.getElementById("mujer");                 
                let avisGenero = document.getElementById("avis_genero"); 

                let elementProvincia = document.getElementById("provincia");   // PROVINCIA  ---------------------
                let avisProvincia = document.getElementById("avis_provincia"); 

                let elementPoliticas = document.getElementById("politicas");   // POLÍTICAS  ---------------------
                let avisPoliticas = document.getElementById("avis_politicas");         

        // CONDICIONS VALIDACIONS: ------------------------------------------------------------------------------------

                if(longNom==0){ // NOM  -----------------------------------
                    avisNom.innerHTML = "El campo Nombre es obligatorio"
                    resultat = false
                    }        
                    else if (longNom < 2) {   
                        avisNom.innerHTML="MÍNIM 2 caracters";
                        resultat = false;
                    }
                    else {
                        avisNom.innerHTML="";
                    }

                if(longCognoms==0){ // COGNOMS  -----------------------------------
                    avisCognoms.innerHTML = "El campo Cognoms es obligatorio"
                    resultat = false
                    }                    
                    else if (longCognoms<3) {  
                        avisCognoms.innerHTML="MÍNIM 3 caracters";
                        resultat = false;
                    }
                    else {
                        avisCognoms.innerHTML="";
                    }

                if (valorEdat ==0) { // EDAT -----------------------------
                avisEdat.innerHTML="El camp Edat és obligatori";
                resultat = false;               
                }
                    else if (valorEdat < 18) {  // Edat més petit que... 
                        avisEdat.innerHTML="Ho sentim, encara ets menos d'edat.";
                        resultat = false;
                    }

                    else if (valorEdat >= 18 && valorEdat <= 65) {  // Edat mínim màxim 
                        avisEdat.innerHTML="Todavía estás trabajando o en el paro.";
                        resultat = false;
                    }

                    else if (valorEdat > 65) {  // Edat més gran que... 
                        avisEdat.innerHTML="Estas jubilado.";
                        resultat = false;
                    }

                    else {
                        avisEdat.innerHTML="";
                    }

                if (valorTelefon ==0) {      // TELEFON -----------------------------------
                    avisTelefon.innerHTML="El camp Telèfon és obligatori";
                    resultat = false;
                }
                    /* de CfhatJPT:
                    javascript
                    function formatearTelefono(telefono) {
                    // Eliminar todos los caracteres que no sean dígitos
                    telefono = telefono.replace(/\D/g, '');
                    
                    // Aplicar el formato 999-999-999
                    telefono = telefono.replace(/(\d{3})(\d{3})(\d{3})/, '$1-$2-$3');
                    
                    return telefono;
                    }

                    // Ejemplo de uso
                    let telefono = '123-456-789';
                    let telefonoFormateado = formatearTelefono(telefono);
                    console.log(telefonoFormateado); // Salida: 123-456-789
                    */
                    
                    else if (!(valorTelefon == formatTelefon)) { // Si el valor és diferent al Format // NO Funciona! Si poso 999-999-999, tampoc ho accepta!<<<<
                            avisTelefon.innerHTML="Ha de ser aquest format 999-999-999";
                            resultat = false; 
                        }

                    else {
                        avisTelefon.innerHTML="";
                    }


                if (!elementGeneroH.checked && !elementGeneroM.checked) {  // GÉNERO ---
                    avisGenero.innerHTML="Es obligatori escoger una opción.";
                    resultat = false;
                }
                else {
                    avisGenero.innerHTML="";
                }
                
                if (elementProvincia.selectedIndex==0) {    // PROVINCIA ---
                    avisProvincia.innerHTML="Es obligatori escoger una provincia.";
                    resultat = false;
                }
                else {
                    avisProvincia.innerHTML="";
                }

                if (!elementPoliticas.checked) {    // POLÍTICAS ---
                    avisPoliticas.innerHTML="Es obligatori acceptar les Polítiques de privacitat."
                    resultat = false;
                }
                else {
                    avisPoliticas.innerHTML="";
                }

                console.log("VALIDAR FORM!!! resultat", resultat);  
            
                return resultat;
                
            })
        </script>

    </body>
</html>