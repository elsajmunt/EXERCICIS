<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Formulari amb CSS i JS. Prova Guardar al GidUp</title>
</head>
    <body>
        <form onsubmit="return validarFormulario()"> <!-- true: envia, false: no envia -->
            <input type="text" name="nombre" id="nombre_id" placeholder="introducir nombre"><br> <!-- name: Surt valor a la url de resposta -->
            <span id="nombreError_id" style="font-size: small; color: rgb(3, 139, 110);"></span>
            <br>

            <input type="date" name="fecha_nacimiento" id="fecha_nacimiento" placeholder="Selecciona fecha"><br> 
            <span id="fechaError_id" style="font-size: small; color: rgb(241, 119, 4);"></span>
            <br>

            <textarea name="descripcio" id="descripcio" rows="4" cols="50"></textarea>
            
            <span id="nombreError_id" style="font-size: small; color: rgb(241, 119, 4);"></span>
            <br>

            <input type="submit" value="Send">
        </form>
    </body>
    <script>
        function validarFormulario(){         
            
            // VARIABLES NOM:
            let nombre = document.getElementById("nombre_id").value.trim()
            let onlyLetters = /^[A-Za-z]+$/;
            let nombreError = document.getElementById("nombreError_id") //accedo al elemento span nombreError_id.

            // VARIABLES DESCRIPCIÓ:
            let descripcio = document.getElementById("descripcio").value.trim()
           
        //  let onlyNumbers = /^[0-9]+$/; No cal!
            
            let NoError= true // Per Acceptar Enviar

            console.log(nombre)
            
            if(nombre.length==0){ // NOM OBLIGATORI --------------
                nombreError.innerHTML = "El campo nombre es obligatorio"
                NoError = false
            }else if (!(onlyLetters.test(nombre))){ // formato
                nombreError.innerHTML = "El campo solo permite letras."
                NoError = false
            }else{
                nombreError.innerHTML =""
            }
                
// PENDENT FER els if i CONDICIONS PER LA DESCRIPCIÓ .......

            return NoError //Si no hay ningun error enviar el formulario. (NoError=true)     
                 
        }

    /*
        miForm.addEventListener('submit', ()=>{   // Opció 1 ...
            let error= false

            //interrumpe el funcionamiento del evento que lo envoca en este caso es el submit, por lo tanto para el envio del formulario
            event.preventDefault()
            // con la funcion trim quitamos los espacios en blanco de delante y detras para evitar que el usuario intodzca solo espacios en blanco
            let nombre = document.getElementById("nombre").value.trim()
            //accedo al elemento span nombreError
            let nombreError = document.getElementById("nombreError")

            let edad = document.getElementById("edad").value.trim()
            //accedo al elemento span edadError
            let edadError = document.getElementById("edadError")

            //volver a escribir el valor introducido sin los espacios de delante y detras para cuando se envia
            document.getElementById("nombre").value = nombre
            document.getElementById("edad").value = edad

            if(nombre.length==0){ // obligatorio
                nombreError.innerHTML = "El campo nombre es obligatorio"
                error = true
            }else if (!(onlyLetters.test(nombre))){ // formato
                nombreError.innerHTML = "El campo solo permite letras"
                error = true
            }else{
                nombreError.innerHTML =""
            }


            if(edad.length==0){ // obligatorio
                edadError.innerHTML = "El campo edad es obligatorio"
                error=true
            }else if (!(onlyNumbers.test(edad))){ // formato
                edadError.innerHTML = "El campo solo permite numeros"
                error = true
            } else{
                edadError.innerHTML = ""
            }   

            //Si no hay ningun error enviar el formulario
            if(!error) miForm.submit()

        }) */

    </script>
</html>