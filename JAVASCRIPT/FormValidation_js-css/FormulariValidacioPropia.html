<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <form onsubmit="return validarFormulario()"> <!-- true: envia, false: no envia -->
            <input type="text" name="nombre" id="nombre_id" placeholder="introducir nombre"><br> <!-- name: Surt valor a la url de resposta -->
            <span id="nombreError_id" style="font-size: small; color: #f00;"></span>
            <br>
            <input type="text" name="edad" id="edad" placeholder="introducir edad"><br>
            <span id="edadError_id" style="font-size: small; color: #f00;"></span>
            <br>
            <input type="text" name="correoelectronico" id="email" placeholder="introducir Email"><br>
            <span id="emailError_id" style="font-size: small; color: #f00;"></span>
            <br>
            <input type="submit" value="Send">
        </form>
    </body>
    <script>
        function validarFormulario(){         
            
            let nombre = document.getElementById("nombre_id").value.trim()
            console.log(nombre)
            let onlyLetters = /^[A-Za-z]+$/;
            let onlyNumbers = /^[0-9]+$/;
            let nombreError = document.getElementById("nombreError_id") //accedo al elemento span nombreError_id.
            let NoError= true // Per Acceptar Enviar

            let edad = document.getElementById("edad").value.trim()           
            let edadError = document.getElementById("edadError_id") //accedo al elemento span edadError_id.

            let email = document.getElementById("email").value.trim()           
            let emailError = document.getElementById("emailError_id") //accedo al elemento span emailError_id. 
            let arrobaRequired = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; 
            
            if(nombre.length==0){ // NOM OBLIGATORI --------------
                nombreError.innerHTML = "El campo nombre es obligatorio"
                NoError = false
            }else if (!(onlyLetters.test(nombre))){ // formato
                nombreError.innerHTML = "El campo solo permite letras."
                NoError = false
            }else{
                nombreError.innerHTML =""
            }

            if(edad.length==0){  // EDAT OBLIGATORI --------------
                edadError.innerHTML = "El campo edad es obligatorio"
                NoError=false
            }else if (!(onlyNumbers.test(edad))){ // formato
                edadError.innerHTML = "El campo solo permite numeros"
                NoError = false
            } else{
                edadError.innerHTML = ""
            }   

            if(email.length==0){  // EMAIL OBLIGATORI --------------
                emailError.innerHTML = "El campo email es obligatorio"
                NoError=false
            }else if (!(arrobaRequired.test(email))){ // formato
                emailError.innerHTML = "El campo debe añadir un email"
                NoError = false
            } else{
                emailError.innerHTML = ""
            }  
        
            return NoError //Si no hay ningun error enviar el formulario. (NoError=true)          
        }

    /*
        miForm.addEventListener('submit', ()=>{   // Opció 1 ...
            let error= false

            //interrumpe el funcionamiento del evento que lo envoca en este caso es el submit, por lo tanto para el envio del formulario
            event.preventDefault()
            // con la funcion trim quitamos los espacios en blanco de delante y detras para evitar que el usuario intodzca solo espacios en blanco
            let nombre = document.getElementById("nombre").value.trim()
            //accedo al elemento span nombreError
            let nombreError = document.getElementById("nombreError")

            let edad = document.getElementById("edad").value.trim()
            //accedo al elemento span edadError
            let edadError = document.getElementById("edadError")

            //volver a escribir el valor introducido sin los espacios de delante y detras para cuando se envia
            document.getElementById("nombre").value = nombre
            document.getElementById("edad").value = edad

            if(nombre.length==0){ // obligatorio
                nombreError.innerHTML = "El campo nombre es obligatorio"
                error = true
            }else if (!(onlyLetters.test(nombre))){ // formato
                nombreError.innerHTML = "El campo solo permite letras"
                error = true
            }else{
                nombreError.innerHTML =""
            }


            if(edad.length==0){ // obligatorio
                edadError.innerHTML = "El campo edad es obligatorio"
                error=true
            }else if (!(onlyNumbers.test(edad))){ // formato
                edadError.innerHTML = "El campo solo permite numeros"
                error = true
            } else{
                edadError.innerHTML = ""
            }   

            //Si no hay ningun error enviar el formulario
            if(!error) miForm.submit()

        }) */

    </script>
</html>